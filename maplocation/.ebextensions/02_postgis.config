packages:
  yum:
    gdal: []
    gdal-devel: []
    geos: []
    geos-devel: []
    proj: []
    proj-devel: []

commands:
  01_verify_gdal:
    command: |
      echo "Verifying GDAL installation..."
      ldconfig -v 2>/dev/null | grep -i gdal || echo "GDAL not found in ldconfig"
      find /usr -name "libgdal*" 2>/dev/null | head -5 || echo "No GDAL libraries found"
      python3 -c "from osgeo import gdal; print('GDAL version:', gdal.__version__)" || echo "Python GDAL binding check failed"
    ignoreErrors: true

  02_enable_postgis:
    command: |
      # Enable PostGIS extension on RDS (requires superuser, may fail gracefully)
      # This should be run manually via psql or RDS console if it fails
      echo "PostGIS extension should be enabled manually on RDS if not already done"
      echo "Run: CREATE EXTENSION IF NOT EXISTS postgis; as RDS superuser"
    ignoreErrors: true
